var styles="\nhtml, body {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n}\nbody {\n  overflow: hidden;\n  touch-action: none;\n  background: #252525;\n}\nmain {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\ncanvas {\n  width: auto !important;\n  height: auto !important;\n  max-width: 100% !important;\n  max-height: 100% !important;\n /* box-shadow: 0px 0px 40px #000000;*/\n}\n",styleSheet=document.createElement("style");let w,h;styleSheet.innerText=styles,document.head.appendChild(styleSheet);let s,c,pg,pg2,img,sh,i,f,g,k,frameMod,blurShader,borderStr,uOctave,border,blockColor,blockColor2,blockColor3,far,blockW,blockH,yatayChooser,sChooser,mapChooser,ellipseChooser,akChooser,dirChooser,whEdgeX,probb,borderBox,pix=2,seed1=99999999*mathRand(),stopCount=1,theVertex1="\n#ifdef GL_ES\nprecision highp float;\n#endif\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\nvoid main() {\n  vTexCoord = aTexCoord;\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  positionVec4.xy = positionVec4.xy * 2.0 - 1.0;\n  gl_Position = positionVec4;\n}\n",theVertex2="\n#ifdef GL_ES\n  precision highp float;\n  #endif\n  attribute vec3 aPosition;\n  void main(){\n    gl_Position=vec4(aPosition,1.0);\n  }\n",fbmfrag="\nprecision highp float;\n#define PI 3.14159265359\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture0;\nuniform float u_time;\nuniform vec2 uResolution;\nuniform float u_octave;\nuniform float u_fbmAmp;\nuniform float u_roundness;\nuniform float u_angleC;\nhighp float random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\nfloat noise (in vec2 st) {\n    vec2 i = floor(st);\n    vec2 fu = fract(st);\n    float a = random(i);\n    float b = random(i + vec2(1.0, 0.0));\n    float c = random(i + vec2(0.0, 1.0));\n    float d = random(i + vec2(1.0, 1.0));\n    vec2 u = fu * fu * (3.0 - 2.0 * fu);\n    return mix(a, b, u.x) +\n            (c - a)* u.y * (1.0 - u.x) +\n            (d - b) * u.x * u.y;\n}\n#define OCTAVES 4\nfloat fbm (in vec2 st) {\n    float value = 0.0;\n    float amplitude = 0.25;\n    float frequency = 0.1;\n    for (int i = 0; i < OCTAVES; i++) {\n        value += amplitude* noise(st);\n        st *= u_octave + u_time/100.0;\n        amplitude *= .45; \n    }\n    return value;\n}\nfloat fbm6( in vec2 p ){\n    vec2 q = vec2( fbm( p + vec2(0.0,u_roundness) ),\n                   fbm( p + vec2(0.0,2.0) ) );\n    vec2 r = vec2( fbm( p + 4.0*q + vec2(4.0,3.0)),\n                   fbm( p + 4.0*q + vec2(u_angleC * 4.0,0.0)));\n    return fbm( p + u_fbmAmp* r ); // 2.0, 6.0\n}\nvoid main() {\n  vec2 st = gl_FragCoord.xy/uResolution.xy;\n  vec2 uv = vTexCoord;\n  uv.y = 1.0 - uv.y;\n  vec2 texelSize = 1.0 / uResolution;\n  vec2 offset;\n  float scale = 0.1;\n  float offset2 = 0.1;\n  float angle;\n\n  angle = noise(st + uv * 0.2) * PI * 2.0; //0.01 0.4\n  float radius = offset2;\n  st *= scale;\n  st *= radius * vec2(fract(angle *  st.x), fract(angle / st.y));\n\n  offset = texelSize  * vec2(4.0,4.0) - fbm6(uv) + 0.18;\n  vec4 color = vec4(0.0);\n  float div;\n  \n  color += texture2D(uTexture0, uv + vec2(offset.y, st.y)); \n  color += texture2D(uTexture0, uv + vec2(-offset.y, st.y)); \n  color += texture2D(uTexture0, uv + vec2(-offset.x, st.x)); \n  color += texture2D(uTexture0, uv + vec2(offset.x, st.x)); \n\n  color += texture2D(uTexture0, uv + vec2(offset.y, -st.y)); \n  color += texture2D(uTexture0, uv + vec2(-offset.y, -st.y)); \n  color += texture2D(uTexture0, uv + vec2(-offset.x, -st.x)); \n  color += texture2D(uTexture0, uv + vec2(offset.x, -st.x)); \n  div = 8.0;\n  color /= div;      \n  gl_FragColor = color;\n}\n",pixfrag="\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define PI 3.14159265359\nconst float PHI = 1.61803398874989484820459;\nconst float SEED = 43758.0;\nuniform vec2 resolution;\nuniform sampler2D pg;\nuniform sampler2D pg2;\nuniform sampler2D img;\nuniform float ak;\nuniform float dirX;\nuniform float dirY;\nuniform float satOn;\nuniform float proD;\n\nfloat random (vec2 st) {\n    return fract(sin(dot(st.xy,\n                         vec2(12.9898,78.233)))*\n        43758.5453123);\n}\nvec3 rgb2hsv(vec3 c) {\n  vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n  vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n  vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n  float d = q.x - min(q.w, q.y);\n  float e = 1.0e-10;\n  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\n  vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / resolution;\n  uv.y = 1. - uv.y;\n\n  vec2 offset;\n  vec2 pgCol;\n  offset = vec2(texture2D(pg2, uv).r * 10. * ak ) * vec2(1./resolution.x, 1./resolution.y)  * random(uv/1.0);\n  pgCol = vec2(texture2D(pg, uv));\n\n  if(satOn == 1.0){/////sadece dÃ¼z\n    if(pgCol.x < proD) offset.x *= dirX * -1.;\n     else offset.x *= dirX;\n    if(pgCol.y < proD) offset.y *= dirY * -1.;\n     else  offset.y *= dirY;\n  }else if(satOn == 2.0){////bu kose\n    if(pgCol.x < .5) offset.x *= -1.;\n      else if(pgCol.x < 1.) offset.x *= dirX;\n    if(pgCol.y < .5) offset.y *= -1.;\n      else if(pgCol.y < 1.) offset.y *= dirY;\n  }else{////////bu da hepsi\n    if(pgCol.x < .1) offset.x *= -1.;\n      else offset.x *= dirX;\n    if(pgCol.y < .1) offset.y *= -1.;\n      else  offset.y *= dirY;\n  }\n\n  vec3 c = texture2D(img, uv + offset).rgb ;\n  \n  vec3 hsv = rgb2hsv(c.rgb);\n  hsv.y *= 1.0005;\n  c.rgb = hsv2rgb(hsv);\n\n  c -= texture2D(img, uv + random(uv/1.0) + offset).rgb;\n  c += texture2D(img, uv + random(uv/1.0) - offset).rgb;\n\n  c.rgb = ((c.rgb - vec3(0.5)) * 1.005 + vec3(0.5));\n\n  gl_FragColor = vec4(c, 1.);\n  }\n";function setup(){w=windowWidth,h=windowHeight,c=createCanvas(w,h,WEBGL),pixelDensity(pix),f=createGraphics(w,h),f.pixelDensity(pix),f.colorMode(HSB,360,100,100,1),pg=createGraphics(w,h),pg.pixelDensity(pix),pg.noStroke(),g=createGraphics(w,h,WEBGL),g.pixelDensity(pix),g.colorMode(HSB,360,100,100,1),g.background(0,0,80),f.background(0,0,10),pg2=createGraphics(w,h),pg2.pixelDensity(pix),pg2.noStroke(),img=createGraphics(w,h),img.pixelDensity(pix),img.imageMode(CENTER),img.colorMode(HSB,360,100,100,1),img.rectMode(CENTER),f.rectMode(CENTER),blurShader=g.createShader(theVertex1,fbmfrag),sh=createShader(theVertex2,pixfrag),console.log(seed1),noiseSeed(seed1),randomSeed(seed1);let e=[25,50,75,50,25,50,75,50,50,75];frameMod=e[floor(random(e.length))],far=30,frameRate(far),f.push(),f.rectMode(CENTER),f.fill(40,10,70),f.rect(w/2,h/2,2*w,2*h);for(let e=0;e<4e3;e++){let e=random(-200,width+200),o=random(-200,height+200);noise(.01*e,.01*o);f.noFill(),f.stroke(0,0,10,random(.8)),f.ellipse(e+random(-10,10),o+random(-10,10),random(100))}let o,n,r=random([1,2]),i=random([1,2]),t=random([0,20,30,10,25,35,40,45]),a=random([180,220,150,160,170,190,200,240]),m=random([180,220,150,160,170,190,200,240,0,20,30,10,25,35,40,45]),d=random(w/2,w/1.33),l=random(w/4,w/2),p=random(h/2,h/1.33),u=random(h/4,h/2),v=random(height/5,height/2.25),x=random(width/5,width/2.25),b=random(width/19.2,width/5),C=random(height/19.2,height/5),D=width/5,y=height/5,k=random([0,1]);f.push(),0==k?(o=random(-height/10,height/10),f.translate(0,o)):(o=random(-width/10,width/10),f.translate(o,0)),f.beginShape(TRIANGLES);for(let e=0;e<200;e++){let e,o;f.fill(t,random(50,70)/4,random(50,60)/r),f.stroke(a,random(50,70)/4,random(50,60)/r,random(.4));let n=100;0==k?(e=random(random(b-n,b+n),d-random(b-n,b+n)),o=random(h/2-random(v-n,v+n),h/2+random(v-n,v+n))):(e=random(w/2-random(x-n,x+n),w/2+random(x-n,x+n)),o=random(random(C-n,C+n),p-random(C-n,C+n))),f.curveVertex(e,o),f.endShape()}f.pop(),f.push(),0==k?(n=random(-height/10,height/10),f.translate(0,n)):(n=random(-width/10,width/10),f.translate(n,0)),f.beginShape(TRIANGLES);for(let e=0;e<200;e++){let e,o;f.fill(a,random(50,70)/4,random(50,60)/i),f.stroke(t,random(50,70)/4,random(50,60)/r,random(.4));let n=100;0==k?(e=random(l+random(b-n,b+n),w-random(b-n,b+n)),o=random(h/2-random(v-n,v+n),h/2+random(v-n,v+n))):(e=random(w/2-random(x-n,x+n),w/2+random(x-n,x+n)),o=random(u+random(C-n,C+n),h-random(C-n,C+n))),f.curveVertex(e,o),f.endShape()}f.pop();let S;f.push(),0==k?(S=random(-height/10,height/10),f.translate(0,S)):(S=random(-width/10,width/10),f.translate(S,0)),f.beginShape(TRIANGLES);for(let e=0;e<200;e++){let e,o;f.fill(m,random(50,70)/4,random(50,60)/1),f.stroke(t,random(50,70)/4,random(50,60)/i,random(.4));let n=100;0==k?(e=random(w/2-random(D-n,D+n),w/2+random(D-n,D+n)),o=random(h/2-random(v-n,v+n),h/2+random(v-n,v+n))):(e=random(w/2-random(x-n,x+n),w/2+random(x-n,x+n)),o=random(h/2-random(y-n,y+n),h/2+random(y-n,y+n))),f.curveVertex(e,o),f.endShape()}f.pop(),f.pop(),minDim=min(width,height),sChooser=random([1,2,3,1]),1==sChooser?s=minDim/10:2==sChooser?s=minDim/50:3==sChooser&&(s=minDim/20),mapChooser=random([0,0,0,0,1,2,0,0]),ellipseChooser=random([0,0,1,0,0]),0!==mapChooser&&(ellipseChooser=0),probb=random([0,1]),akChooser=25==frameMod?random([1,2]):random([1,2,3,4,1,2]),dirChooser=random([1,2,3,3]);let U,E=random([1,-1,0,0]);U=1==E||-1==E?0:random([-1,1]);let T=random([.1,.5]);shader(sh),sh.setUniform("resolution",[w*pix,h*pix]),sh.setUniform("pg",pg2),sh.setUniform("pg2",pg2),sh.setUniform("img",f),sh.setUniform("proD",T),1==dirChooser?(sh.setUniform("dirX",E),sh.setUniform("dirY",U)):2==dirChooser?(sh.setUniform("dirX",random([-1,1])),sh.setUniform("dirY",random([-1,1]))):3==dirChooser&&(sh.setUniform("dirX",random([-1,1,0,0,0])),sh.setUniform("dirY",random([-1,1,0,0,0]))),1==akChooser?sh.setUniform("ak",1):2==akChooser?sh.setUniform("ak",3):3==akChooser?sh.setUniform("ak",5):4==akChooser&&sh.setUniform("ak",10),sh.setUniform("satOn",dirChooser),roundInt=4,uPi=1,uFbmAmp=round(random(30,80),roundInt),uAngleC=round(random(1),roundInt),uAniSpeed=random([2250,2250,2500,2500,3e3,3e3,3e3,3e3]),uOctave=5;for(let e=0;e<2;e++)blurShader.setUniform("uTexture0",f),blurShader.setUniform("u_time",millis()/1e3),blurShader.setUniform("uResolution",[width*pix,height*pix]),blurShader.setUniform("u_octave",uOctave),blurShader.setUniform("u_fbmAmp",uFbmAmp),blurShader.setUniform("u_angleC",uAngleC),blurShader.setUniform("u_anispd",uAniSpeed),blurShader.setUniform("u_roundness",random(.1,1)),g.noStroke(),g.shader(blurShader),g.translate(-width/2,-height/2),g.rect(0,0,width,height);img.image(g,w/2,h/2),blockColor=255,blockColor2=255,blockColor3=255,blockW=width/2,blockH=height/2,blockAni=random([0,1]),border=random([0,0,1,1,0]),1==border&&(borderStr="border"),yatayChooser=random([0,1,2,4,2,4]),borderBox=random([1,2]),whEdgeX=minDim/10,noCursor()}function draw(){let e=(random(w/s)^frameCount/s)*s,o=(random(h/s)^frameCount/s)*s;if(pg.fill(random([0,255,127]),random([0,255,127]),random([0,255,127])),pg.rect(e,o,2*s,2*s),pg2.fill(random([0,255,127]),random([0,255,127]),random([0,255,127])),pg2.rect(e,o,2*s,2*s),1==border&&(pg2.push(),pg2.fill(blockColor,blockColor2,blockColor3),pg2.rectMode(CENTER),0==yatayChooser?(pg2.push(),pg2.translate(blockW,height/2),pg2.rect(0,0,width/10,height),pg2.pop(),pg2.push(),pg2.translate(blockW-width/5,height/2),pg2.rect(0,0,width/10,height),pg2.pop(),pg2.push(),pg2.translate(blockW+width/5,height/2),pg2.rect(0,0,width/10,height),pg2.pop()):1==yatayChooser?(pg2.push(),pg2.translate(width/2,blockH),pg2.rect(0,0,width,height/10),pg2.pop(),pg2.push(),pg2.translate(width/2,blockH-height/5),pg2.rect(0,0,width,height/10),pg2.pop(),pg2.push(),pg2.translate(width/2,blockH+height/5),pg2.rect(0,0,width,height/10),pg2.pop()):2==yatayChooser?(pg2.push(),pg2.rectMode(CORNER),1==borderBox?(pg2.rect(0,0,width/2,height/2),pg2.rect(width/2,height/2,width,height)):(pg2.rect(width/2,0,width,height/2),pg2.rect(0,height/2,width/2,height)),pg2.pop()):4==yatayChooser&&(pg2.push(),pg2.rectMode(CENTER),1==borderBox?pg2.rect(width/2,height/2,width,height/2):pg2.rect(width/2,height/2,min(width,height)/2,height),pg2.pop()),pg2.pop()),c.image(img,w/2,h/2),img.image(c,w/2,h/2),frameCount%frameMod==0){minDim=min(width,height),1==sChooser?s=random([minDim/10,minDim/5,minDim/20,minDim/10,minDim/50]):2==sChooser?s=random([minDim/50,minDim/20,minDim/50,minDim/20]):3==sChooser&&(s=random([minDim/10,minDim/5,minDim/10,minDim/5]));for(let e=0;e<h;e+=s)for(let o=0;o<w;o+=s)0==mapChooser||(s=1==mapChooser?0==probb?o<=width/2-2*s?random([minDim/10,minDim/5,minDim/10,minDim/5]):random([minDim/40,minDim/20,minDim/40,minDim/20]):o>=width/2-2*s?random([minDim/10,minDim/5,minDim/10,minDim/5]):random([minDim/40,minDim/20,minDim/40,minDim/20]):0==probb?e<=height/2-2*s?random([minDim/10,minDim/5,minDim/10,minDim/5]):random([minDim/40,minDim/20,minDim/40,minDim/20]):e>=height/2-2*s?random([minDim/10,minDim/5,minDim/10,minDim/5]):random([minDim/40,minDim/20,minDim/40,minDim/20])),pg2.fill(random([0,255,127]),random([0,255,127]),random([0,255,127])),0==ellipseChooser?pg2.rect(o,e,s,s):pg2.ellipse(o,e,s,s);1==akChooser?sh.setUniform("ak",random([1,1,2,1,1,2,3,1,1,1])):2==akChooser?sh.setUniform("ak",3):3==akChooser?sh.setUniform("ak",5):4==akChooser&&sh.setUniform("ak",10);let e,o=random([1,-1,0,0]);e=1==o||-1==o?0:random([-1,1]),1==dirChooser?(sh.setUniform("dirX",o),sh.setUniform("dirY",e)):2==dirChooser?(sh.setUniform("dirX",random([-1,1])),sh.setUniform("dirY",random([-1,1]))):3==dirChooser&&(sh.setUniform("dirX",random([-1,1,0,0,0])),sh.setUniform("dirY",random([-1,1,0,0,0]))),blockColor=random([255,127]),blockColor2=random([255,127]),blockColor3=random([255,127]),blockW=random([width/2,width/4,width/1.3333]),blockH=random([height/2,height/4,height/1.3333]),"border"==borderStr&&(border=random([1,1,0,1,1]))}sh.setUniform("u_time",millis()/1e3),sh.setUniform("pg",pg2),sh.setUniform("img",img),sh.setUniform("pg2",pg2),quad(-1,-1,1,-1,1,1,-1,1)}function keyPressed(){" "==key&&(stopCount+=1,stopCount%2==0?frameRate(0):frameRate(far)),"s"==key&&saveCanvas("strained","png")}